<#-- results are inclue in a 'row' -->
<div class="col-xs-12 col-sm-11 col-sm-offset-1">
	<@messages errors=errors infos=infos />
	<#if result_user?? && result_user?has_content>
		<table class="table table-hover">
			<thead>
				<tr>
					<th>#i18n{module.workflow.ticketingfacilfamilles.task_ticket_emailagent.search.entity}</th>
					<th>#i18n{module.workflow.ticketingfacilfamilles.task_ticket_emailagent.search.lastname}</th>
					<th>#i18n{module.workflow.ticketingfacilfamilles.task_ticket_emailagent.search.firstname}</th>
				</tr>
			</thead>
			<tbody>
				<#list result_user as user>
				<tr class="result_user_${id_task}" data-email="${user.email!}">
					<td>${user.entite!}</td>
					<td>${user.lastname!}</td>
					<td>${user.firstname!}</td>
				</tr>
         		</#list>
			</tbody>
		</table>
	</#if>
</div>
<script>
$("tr.result_user_${id_task}").click(function(){
	const SEMICOLON = ";";
    var mail = $(this).attr("data-email");
    var input_email = $("#${input_email}").val();
    var array_input_email = [];

    if (input_email.length > 0) {
        array_input_email = $("#${input_email}").val().split(SEMICOLON);
        }
  
    if (input_email.length == 0 || !array_input_email.includes(mail)) {
        array_input_email.push(mail)
        }

    $("#${input_email}").val(array_input_email.join(SEMICOLON));
})
</script>